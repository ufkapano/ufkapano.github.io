<html>
<head>
<title>Python</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
</head>

<body bgcolor="white" text="black" link="blue" vlink="navy" alink="red">

<h1>Adnotacje (Python3)</h1>

<p>PEP 3107 - Function Annotations

<p>PEP 526 - Syntax for Variable Annotations

<p>https://docs.python.org/3/howto/annotations.html
<br>Annotations Best Practices.
Najlepsze praktyki dostępu do adnotacji zależą od wersji Pythona,
ze względu na ciągły rozwój nowych narzędzi.

<p>https://docs.python.org/3/library/inspect.html
<br>'inspect' - Inspect live objects [Py3.5+].
There are four main kinds of services provided by this module: 
type checking, getting source code, inspecting classes and functions, 
and examining the interpreter stack.
inspect.get_annotations() [Py3.10+].

<p>https://docs.python.org/3/library/typing.html
<br>'typing' - Support for type hints [Py3.5+].
Tu jest podana lista odpowiednich PEPs.

<h3>ADNOTACJE FUNKCJI</h3>

<p>Argumenty funkcji mogą mieć adnotacje (annotations) postaci
': expression', następującą po nazwie parametru.
Podobnie może być dla parametrów postaci *identifier lub **identifier.
Funkcje mogą mieć również adnotację 'return' postaci '-&gt; expression',
która następuje po liście parametrów.
Jest to składnia do dołączania do funkcji dodatkowych informacji
(metadata) dotyczących parametrów i wartości zwracanych.
Jest to mechanizm całkowicie opcjonalny.
W Pythonie 2 można było tylko w docstringu coś dopowiedzieć.

<p>Wartości adnotacji są dostępne jako wartości słownika
'__annotations__', gdzie kluczami są nazwy argumentów funkcji (string).

<hr><pre>
# Syntax.

def nazwa_funkcji(arg1: wyrażenie, arg2: wyrażenie = wartość) -&gt; wyrażenie:
   instrukcje

def nazwa_funkcji(*arguments: wyrażenie, **keywords: wyrażenie = wartość) -&gt; wyrażenie:
   instrukcje
</pre><hr><pre>
# Adnotacje funkcji są zwykle używane jako podpowiedzi dla typów.

def sum_two_numbers(a: int, b: float) -&gt; complex:
   return a + b

sum_two_numbers.__annotations__
# {'a': &lt;class 'int'&gt;, 'b': &lt;class 'float'&gt;, 'return': &lt;class 'complex'&gt;}
</pre><hr><pre>
# https://stackoverflow.com/questions/14379753/what-does-mean-in-python-function-definitions

def kinetic_energy(m:'in kg', v:'in m/s')->'Joules': 
    return 0.5 * m * v**2
# dictionary kinetic_energy.__annotations__
# {'return': 'Joules', 'v': 'in m/s', 'm': 'in kg'}
</pre><hr>

<h3>ADNOTACJE ZMIENNYCH</h3>

<hr><pre>
# Podczas użycia adnotacji zmiennej lub atrybutu klasy
# może wystąpić podstawienie wartości.

class C:
    field: 'annotation'   #  adnotacja atrybutu klasy

# Adnotacje zmiennych są zwykle używane jako podpowiedzi do typów.
import typing

count: int = 0   # adnotacja zmiennej i podstawienie

some_list: typing.List[int] = [3, 5]
some_list: list[int] = [3, 5]   # Py3.9+

some_dict: typing.Dict[str, float] = {"a": 1.2}
some_dict: dict[str, float] = {"a": 1.2}   # Py3.9+

coords: typing.Tuple[int, float] = (12, 3.4)
coords: tuple[int, float] = (12, 3.4)   # Py3.9+
</pre><hr>

<p>Podpowiedzi do typów są opcjonalne i nie są wymuszane w Pythonie.
Bywają przydatne dla narzędzi do statycznej analizy typów.

</body>
</html>
