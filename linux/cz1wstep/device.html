<html>
<head>
<title>Pliki specjalne</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</head>

<body bgcolor="white" text="black" link="blue" vlink="navy" alink="red">

<h1>Pliki specjalne</h1>

<h3>INFORMACJE</h3>

<pre>
/usr/src/linux/Documentation/devices.txt
/proc/devices
</pre>

<h3>OPIS</h3>

<p>W systemie UNIX wyró¿niono tak zwane <em>pliki specjalne</em>.
Pozwalaj± one na widzenie urz±dzeñ wej¶cia/wyj¶cia tak, jakby
to by³y zwyczajne pliki. W ten sposób operacje zapisu i odczytu
z tych urz±dzeñ mog± byæ wykonywane z wykorzystaniem tych samych
wywo³añ systemowych, które dotycz± zapisu i odczytu plików.
W tym celu programy obs³ugi urz±dzeñ (drivers) s± zintegrowane
z j±drem systemu Linux i maj± wy³±czn± kontrolê nad sprzêtem.
Dziêki temu, je¶li program obs³ugi urz±dzenia zosta³ prawid³owo
napisany, u¿ytkownik w ¿aden sposób nie bêdzie móg³ nieprawid³owo
korzystaæ z danego urz±dzenia.

<p>Ze wzglêdu na to, ¿e w j±drze systemu Linux musi istnieæ obok siebie
wiele programów obs³ugi urz±dzeñ, s± one jednoznacznie opisywane
przez ich <em>numery nadrzedne</em> (major numbers).
Program obs³ugi urz±dzeñ mo¿e sterowaæ wieloma urz±dzeniami 
fizycznymi i wirtualnymi, np. wieloma dyskami twardymi i partycjami.
Dostêp do poszczególnych urz±dzeñ mo¿liwy jest na podstawie ich
<em>numerów podrzednych</em> (minor numbers).
Pe³na lista zarezerwowanych numerów znajduje siê w pliku
<em>/usr/src/linux/Documentation/devices.txt</em>.

<p>Istniej± dwa podstawowe typy urz±dzeñ: blokowe i znakowe.
<em>Urz±dzenia blokowe</em> (block devices) s± urz±dzeniami 
o dostêpie swobodnym, co oznacza, ¿e mo¿na dokonywaæ odczytu i zapisu
z i do dowolnego bloku. Dostêp swobodny jest absolutnie konieczny
w systemach plików, co oznacza, ¿e mo¿na je montowaæ tylko na 
urz±dzeniach blokowych.
<em>Urz±dzenia znakowe</em> (character devices) s± natomiast urz±dzeniami,
z których mo¿na korzystaæ wy³±cznie w sposób sekwencyjny, przez co
dostêp do nich odbywa siê bez po¶rednictwa bufora
(karty d¼wiêkowe, skanery, drukarki).

<p>Ka¿de urz±dzenie mo¿e byæ jednoznacznie okre¶lone na podstawie
jego typu (blokowe lub znakowe), numeru nadrzêdnego programu
obs³ugi urz±dzenia i jego numeru podrzêdnego.
Pod³±czenie urz±dzenia polega na wydaniu polecenia <em>mknod</em>
z odpowiednimi parametrami.

<p>Programy obs³ugi urz±dzeñ mog± dzia³aæ w dwóch trybach:
w trybie przepytywania (polling) lub
w trybie z przerwaniami (interrupts).
Poza tym mo¿na jeszcze korzystaæ z DMA.

<h3>WYBRANE PLIKI SPECJALNE</h3>

<p>Mog± byæ cztery partycje podstawowe (primary) na dysku 
<em>/dev/hda</em> oznaczane jako:
<pre> 
/dev/hda1 (3,1)
/dev/hda2 (3,2)
/dev/hda3 (3,3)
/dev/hda4 (3,4)
</pre>

<p>Je¿eli jedna partycja jest rozszerzona (extended), 
np. <em>/dev/hda2</em>,
to partycje logiczne na niej utworzone oznaczane s± jako:
<pre>
/dev/hda5 (3,5)
/dev/hda6 (3,6) itd. 
</pre>

<p>Inne pliki specjalne:

<pre>
/dev/hda (3,0)     napêd dyskowy Master w pierwszym kanale IDE
/dev/hdb (3,64)    napêd dyskowy Slave w pierwszym kanale IDE
/dev/hdc (22,0)    napêd dyskowy Master w drugim kanale IDE
/dev/hdd (22,64)   napêd dyskowy Slave w drugim kanale IDE
/dev/hde (33,0)
/dev/hdf (33,64)
/dev/hdg (34,0)
/dev/hdh (34,64)
/dev/fd0 (2,0)    pierwszy napêd dyskietek
/dev/fd1 (2,1)    drugi napêd dyskietek
/dev/sda (8,0)    pierwszy napêd SCSI
/dev/sdb (8,16)    drugi napêd SCSI
/dev/st0     pierwszy napêd ta¶mowy SCSI (przewijany)
/dev/st1     drugi napêd ta¶mowy SCSI (przewijany)
/dev/nst0     pierwszy napêd ta¶mowy SCSI (nieprzewijany)
/dev/nst1     drugi napêd ta¶mowy SCSI (nieprzewijany)
/dev/ftape       link do /dev/rft0 (napêd ta¶mowy przewijany)
/dev/nftape      link do /dev/nrft0 (napêd ta¶mowy nieprzewijany)
</pre><hr><pre>
/dev/null         kosz na ¶mieci (mozna np. "ls > /dev/null")
/dev/floppy      link do /dev/fd0 (sam zrobi³em)
/dev/cdrom       link do czego¶ konkretnego
	(np. do /dev/hdc lub do /dev/hdd)
/dev/mouse      link do czego¶ konkretnego
	(np. do /dev/psaux lub do /dev/ttyS0)
/dev/psaux (10,1)        mysz PS/2
/dev/ttyS0         COM1 (mysz szeregowa, drukarka)
/dev/ttyS1         COM2 (mysz szeregowa, drukarka)
/dev/ttyS2         COM3 (mysz szeregowa, drukarka)
/dev/ttyS3         COM4 (mysz szeregowa, drukarka)
/dev/modem       link do czego¶ konkretnego
/dev/cua0          COM1 (modem)
/dev/cua1          COM2 (modem)
/dev/cua2          COM3 (modem)
/dev/cua3          COM4 (modem)
/dev/lp0 (6,0)         zwykle LPT1 (drukarka)
/dev/lp1 (6,1)         zwykle LPT2 (drukarka)
/dev/lp2 (6,2)
</pre><hr><pre>
/dev/kmem (1,2)        odwzorowanie wirtualnej pamiêci operacyjnej
/dev/console (5,1)
    konsola systemowa, na któr± wyprowadzane s± komunikaty systemowe
/dev/fb         link do /dev/fb0
/dev/tty (5,0)
/dev/tty1 (4,1)        konsola nr 1 ([lewy Alt]+[F1])
/dev/radio            link do /dev/radio1
/dev/ramdisk           link do /dev/ram0
/dev/rtc             zegar sprzêtowy RTC
/dev/stderr         link
/dev/stdin          link
/dev/stdout         link
/dev/video          link do /dev/video1
</pre>

</body>
</html>
