<html>
<head>
<title>System plików</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</head>

<body bgcolor="white" text="black" link="blue" vlink="navy" alink="red">

<h1>System plików</h1>

<p>FHS = File Hierarchy Standard

<h3>Opis</h3>

<p>W systemie UNIX dane przechowywane s± w hierarchicznym systemie
plików zawieraj±cym pliki ró¿nych typów.
Z programistycznego punktu widzenia pliki sa zwyk³ymi potokami danych
o nieokre¶lonej zawarto¶ci i bez ¶cis³ej struktury.
Mówienie o typach plików jest klasyfikowaniem ich wed³ug funkcji
i przeznaczenia, poniewa¿ format fizyczny plików jest ten sam. 

<p>Powszechnie rozró¿nia siê co najmniej cztery typy plików:
<ol>
<li>Pliki zwyk³e
<li>Katalogi (directory)
<li>Pliki specjalne (reprezentuj±ce urz±dzenia) znakowe
<li>Pliki specjalne (reprezentuj±ce urz±dzenia) blokowe.
</ol>

<p>Jako cztery dodatkowe typy plików wymienia siê czêsto:
<ol start="5">
<li>Gniazda domeny UNIX
<li>£±cza nazwane FIFO
<li>Dowi±zania (³±czniki) sztywne
<li>Dowi±zania (³±czniki) symboliczne.
</ol>

<p>W¶ród plików zwyk³ych mo¿emy wyró¿niæ cztery du¿e grupy:
<ol>
<li>Pliki tekstowe (ASCII text)
<li>Pliki wykonywalne binarne (executable) - programy
<li>Pliki wykonywalne tekstowe (command) - skrypty pow³oki
<li>Pliki z danymi aplikacji (data).
</ol>

<p>Nazwa pliku mo¿e mieæ do 255 znaków, ale lepiej nie przekraczaæ 14.
UNIX rozró¿nia du¿e i ma³e litery.
Czego warto przestrzegaæ w nazwach plików:
<ul>
<li>nie zaczynaæ od kropki (ukryty),
<li>nie stosowaæ znaków specjalnych (k³opoty),
<li>nie zaczynaæ od minusa (bo to wskazuje na opcje polecenia),
<li>nie stosowaæ nazwy test (bo to jest polecenie wewnêtrzne bash).
</ul>

<p>W systemie UNIX jest ograniczenie na d³ugo¶æ scie¿ki 
dostêpu 1023 znaki,
wiêc warto dawaæ niezbyt d³ugie nazwy plikom i katalogom.
Niektóre programy sugeruj± siê rozszerzeniem pliku, choæ
nie jest to cecha systemu. Z tego powodu dobrze jest stosowaæ
przyjête zwyczaje co do rozszerzeñ plików.

<h3>Budowa logiczna systemu plików</h3>

<p>Dany logiczny system plików jest ci±giem bloków ponumerowanych
kolejno 0 ... n, przy czym kolejne bloki stanowi±:
<ul>
<li>blok startowy (nr 0, boot block; zawiera kod potrzebny 
do uruchomienia systemu operacyjnego)
<li>blok nadrzêdny (nr 1, superblock; zawiera m.in. rozmiar bloków,
nazwa urz±dzenia logicznego, nazwa systemu plików)
<li>bloki struktur inode (inode blocks)
<li>bloki danych (data blocks; zawieraj± zwykle pliki, pozycje
katalogów i bloki po¶rednie)
</ul>

<p>Budowa struktury inode 
(patrz <a href="inode1.html">rysunek</a>)
<ul>
<li>typ pliku i prawa dostêpu
<li>w³a¶ciciel (UID, GID)
<li>rozmiar pliku
<li>data utworzenia pliku
<li>data ostatniej operacji dostêpu do pliku
<li>data ostatniej modyfikacji pliku
<li>10 wska¼ników bloków danych
<li>wska¼nik na wska¼nik adresowy pierwszego stopnia
<li>wska¼nik na wska¼nik adresowy drugiego stopnia
<li>wska¼nik na wska¼nik adresowy trzeciego stopnia
</ul>

<h3>PRZYK£ADY</h3>

<p><a href="inode2.html">Przyk³ad szukania pliku
przez system.</a>

<p>Niech blok dyskowy ma 1 KB, adres bêdzie 32-bitowy (4 B).
Wtedy blok po¶redni zawiera 256 adresow bloków na dysku<br>
256 * 4 B = 1024 B = 1 KB

<p>W sumie przy wykorzystaniu adresowania pierwszego stopnia mo¿na
zaadresowaæ 10 + 256 = 266 bloków dyskowych.

<p>Przy wykorzystaniu drugiego stopnia adresowania mo¿na zaadresowaæ
10 + 256 + 256^2 = 65802 bloków dyskowych (oko³o 64 MB).

<p>Przy wykorzystaniu trzeciego stopnia adresowania mo¼na zaadresowaæ
65082 + 256^3 = 16843018 bloków dyskowych (oko³o 16 GB).

<p>Przy wprowadzeniu czwartego stopnia adresowania 
mo¿na by obs³u¿yæ pliki o wielko¶ci oko³o 4 TB.

<p>Ka¿dy plik jest reprezentowany przez jedn± strukturê inode,
co oznacza, ¿e w obrêbie systemu plików ka¿dy inode ma
niepowtarzalny numer.

<p>Katalog jest plikiem, który sk³ada siê z par zawieraj±cych
(numer inode, nazwa pliku).
Mo¿liwy jest dostêp do pliku przez wiele nazw, które mog± siê
nawet znajdowaæ w ró¿nych katalogach (³±cza sztywne, hard links).

<p>W systemie UNIX dostêp do poszczególnych systemów plików nie 
odbywa siê poprzez identyfikatory urz±dzeñ (takie jak numery
napêdów), co ma miejsce w innych systemach operacyjnych, lecz
systemy te po³±czone s± w hierarchiczne drzewo katalogów.
Uk³ad ten tworzony jest przez <em>montowanie</em> (mounting) systemu
plików - czynno¶æ ta dodaje nowy system plików (dowolnego typu)
do istniej±cego drzewa katalogów. Nowy system plików mo¿e byæ
zamontowany w dowolnym katalogu. Katalog ten nazywany jest wtedy
miejscem montowania (mounting point) i zastêpowany jest katalogiem
g³ównym nowego systemu plików wraz z jego podkatalogami i plikami.
<em>Odmontowanie</em> (unmounting) systemu plików ponownie zwalnia
strukturê ukrytego katalogu.

<h3>SYSTEM PLIKOW LINUKSA</h3>

<p>Do poruszania siê po strukturze katalogów s³u¿y polecenie
<em>cd</em>. Zawarto¶æ katalogu przegl±damy poleceniem <em>ls</em>.
Do sprawdzania typu pliku mamy polecenie <em>file</em>.
¦cie¿kê dostêpu do bie¿±cego katalogu wypisuje polecenie <em>pwd</em>.

<h3>WA¯NIEJSZE KATALOGI</h3>

<pre>
/bin     (podstawowe programy dla u¿ytkowników)
/boot     (j±dro systemu i pliki potrzebne do prawid³owego 
          uruchomienia i pracy systemu)
/dev     (pliki specjalne - urz±dzenia)
/etc     (pliki konfiguracyjne programów, skrypty startowe)
/home     (katalogi domowe u¿ytkowniów i us³ug - ftp, http, samba)
/lib     (biblioteki wymagane przez programy z katalogu /bin)
/lib/modules         (modu³y j±dra)
/lost+found  (pliki b±d¼ fragmenty plików, które utraci³y dowi±zania 
         do swoich i-wêz³ów; katalog tworzony automatycznie
	 przy zak³adaniu systemu plików ext2)
/mnt     (punkt montowania urz±dzeñ)
/mnt/cdrom
/mnt/floppy
/opt     (opcjonalny katalog na programy komercyjne)
/proc     (wirtualny system plików do administrowania wewnêtrznego)
/pub       (opcjonalny katalog na zasoby udostêpniane w sieci)
/root     (katalog domowy u¿ytkownika root)
/sbin     (programy dla u¿ytkownika root)
/tmp     (pliki tymczasowe)
/usr          (zwykle najwiêkszy katalog w systemie; aplikacje u¿ytkowe)
/usr/bin
/usr/doc
/usr/lib
/usr/local     (dodatkowe programy lokalne)
/usr/src/linux     (kod ¼rod³owy j±dra)
/var              (pliki z zapisem pracy systemu)
</pre>


</body>
</html>
