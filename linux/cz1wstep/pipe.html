<html>
<head>
<title>Strumienie</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</head>

<body bgcolor="white" text="black" link="blue" vlink="navy" alink="red">

<h1>Strumienie, potoki i filtry</h1>

<h3>STRUMIENIE</h3>

<p>Ka¿demu procesowi w Linuksie s± przypisane trzy strumienie danych:
<ul>
<li>we¶ciowy,
<li>wyj¶ciowy, 
<li>b³êdow (diagnostyczny).
</ul>

<p>Ka¿dy uruchomiony w systemie proces mo¿e otworzyæ jednocze¶nie
na swoje potrzeby zwykle do dwudziestu plików. Otwarty plik proces
identyfikuje poprzez przyporzadkowana mu liczbê ca³kowit± zwan±
deskryptorem pliku. Trzy liczby (0, 1, 2) s± zarezerwowane 
i odpowiadaj± trzem plikom, które s± zawsze otwierane w momencie
utworzenia procesu:
<ul>
<li>0 - stdin (standard input) - zwykle klawiatura
<li>1 - stdout (standard output) - zwykle ekran
<li>2 - stderr (standard error) - zwykle ekran.
</ul>

<h3>POTOKI (PIPE) I FILTRY</h3>

<p>Potok to konstrukcja z³o¿ona z wielu poleceñ, w której stdout 
pierwszego polecenia jest do³±czony do stdin drugiego polecenia,
z kolei stdout drugiego polecenia jest do³±czony do stdin trzeciego
polecenia itd.

<p>Filtry to polecenia, które:

<ul>
<li>s± podatne na dzia³anie mechanizmu prze³±czania stdin/stdout,
<li>zawsze korzystaj± z stdin, stdout i stderr,
<li>oczekuj± na wej¶ciu prostego strumienia bajtów (znaków) i taki¿
strumieñ (po przetworzeniu) wysy³aj± na wyj¶cie.
</ul>

<h3>OPERATORY DO PRZE£¡CZANIA STRUMIENI</h3>

<pre>
&gt; plik-out
&gt;&gt; plik-out
&lt; plik-in
2&gt; plik-err
2&gt;&gt; plik-err
2&gt;&1          (stderr idzie tam gdzie stdout)
1&gt;&2          (stdout idzie tam gdzie stderr)
</pre>
<hr>
<pre>
$ ls | wc -w
(ls mo¿e rozpoczynaæ potok; 
otrzymujemy liczbê plików i katalogów w katalogu bie¿±cym)

$ ls / | cat -n | grep oo

$ rpm -qa | less
(less i more mog± koñczyæ potok)

$ rpm -qa | tee lista.txt | wc -l
(tee rozga³êzia strumieñ do pliku lista.txt; 
wc policzy linie, czyli zainstalowane pakiety)

$ rpm -qa | tee -a lista.txt | wc -l           
(tee dopisze do pliku)

$ tty
(otrzymamy nazwê pliku specjalnego zwi±zanego z naszym terminalem,
czyli standardowym wyj¶ciem)

$ rpm -qa | tee `tty` | wc -l
(tee skieruje na ekran; wykorzystane polecenie tty)

$ rpm -qa | tee $(tty) | wc -l
(korzystamy z konstrukcji pow³oki bash)
</pre>


</body>
</html>
